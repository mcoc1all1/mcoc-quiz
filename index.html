<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MCOC Quiz Arena â€“ Unofficial Fan Site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- SEO + mobile theming -->
  <meta
    name="description"
    content="Unofficial Marvel Contest of Champions quiz â€“ test your knowledge of classes, champions, game modes, immunities and combat mechanics across Easy, Hard and Very Hard modes."
  />
  <meta name="theme-color" content="#2563eb" />

  <style>
    :root {
      /* Brighter, game-y light theme */
      --bg-main: #e0f2fe;
      --bg-card: rgba(255, 255, 255, 0.98);
      --bg-card-soft: rgba(248, 250, 252, 0.98);

      --accent: #2563eb;          /* bright blue */
      --accent-2: #f97316;        /* warm orange */
      --accent-soft: rgba(37, 99, 235, 0.12);
      --accent-strong: #1d4ed8;
      --accent-strong-2: #ea580c;

      --text-main: #111827;       /* dark slate */
      --text-soft: #4b5563;

      --danger: #b91c1c;
      --danger-soft: rgba(248, 113, 113, 0.2);
      --success: #15803d;
      --success-soft: rgba(22, 163, 74, 0.18);

      --border-subtle: rgba(148, 163, 184, 0.8);
      --radius-lg: 18px;
      --radius-xl: 24px;
      --shadow-soft: 0 18px 40px rgba(148, 163, 184, 0.35);
      --transition-fast: 0.18s ease-out;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at 0% 0%, #bfdbfe 0, #eff6ff 35%, #e0f2fe 60%, #bfdbfe 100%);
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 16px;
      /* allow vertical scroll on small screens, keep horizontal clean */
      overflow-x: hidden;
      overflow-y: auto;
      position: relative;
    }

    /* animated background glows */
    body::before,
    body::after {
      content: "";
      position: fixed;
      width: 420px;
      height: 420px;
      border-radius: 50%;
      filter: blur(90px);
      opacity: 0.45;
      pointer-events: none;
      z-index: -1;
      animation: orb-move 16s infinite alternate ease-in-out;
    }

    body::before {
      background: radial-gradient(circle, rgba(59, 130, 246, 0.8), transparent);
      top: -120px;
      left: -80px;
    }

    body::after {
      background: radial-gradient(circle, rgba(248, 150, 70, 0.8), transparent);
      bottom: -160px;
      right: -120px;
      animation-delay: 3.2s;
    }

    @keyframes orb-move {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
      }
      100% {
        transform: translate3d(40px, -30px, 0) scale(1.06);
      }
    }

    .app-shell {
      width: 100%;
      max-width: 1100px;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 16px;
      position: relative;
      z-index: 1;
    }

    .site-header {
      padding: 12px 18px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      background:
        linear-gradient(120deg, #eff6ff, #e0f2fe);
      box-shadow: 0 18px 35px rgba(148, 163, 184, 0.4);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 8px 16px;
    }

    .site-header h1 {
      font-size: 1.5rem;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .title-glow {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, var(--accent), #dbeafe);
      box-shadow:
        0 0 16px rgba(37, 99, 235, 0.9),
        0 0 34px rgba(191, 219, 254, 0.7);
      position: relative;
      animation: pulse-glow 2.1s infinite ease-in-out;
    }

    .title-glow::after {
      content: "";
      position: absolute;
      border-radius: inherit;
      inset: 3px;
      border: 2px solid rgba(255, 255, 255, 0.9);
    }

    @keyframes pulse-glow {
      0% {
        transform: scale(1);
        box-shadow:
          0 0 14px rgba(37, 99, 235, 0.9),
          0 0 28px rgba(191, 219, 254, 0.6);
      }
      50% {
        transform: scale(1.1);
        box-shadow:
          0 0 20px rgba(37, 99, 235, 1),
          0 0 45px rgba(191, 219, 254, 0.9);
      }
      100% {
        transform: scale(1);
        box-shadow:
          0 0 14px rgba(37, 99, 235, 0.9),
          0 0 28px rgba(191, 219, 254, 0.6);
      }
    }

    .badge {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background:
        radial-gradient(circle at top left, #eff6ff, #e0f2fe);
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .tagline {
      margin: 0;
      font-size: 0.9rem;
      color: var(--text-soft);
      max-width: 540px;
    }

    .site-main {
      flex: 1;
      display: flex;
      min-height: 0;
    }

    .panel {
      width: 100%;
    }

    .panel-card {
      position: relative;
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 28px 20px 20px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    /* HUD strip across top of each card */
    .panel-card::before {
      content: "";
      position: absolute;
      left: 18px;
      right: 18px;
      top: 10px;
      height: 3px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      box-shadow:
        0 0 10px rgba(37, 99, 235, 0.8),
        0 0 16px rgba(249, 115, 22, 0.6);
      opacity: 0.9;
    }

    .panel-card.center {
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .panel.hidden {
      display: none;
    }

    h2 {
      margin: 0;
      font-size: 1.35rem;
    }

    h3 {
      margin: 0;
      font-size: 1rem;
    }

    p {
      margin: 0;
    }

    .mode-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 8px;
    }

    .btn {
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      background: transparent;
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform var(--transition-fast),
        box-shadow var(--transition-fast),
        background var(--transition-fast),
        border-color var(--transition-fast),
        color var(--transition-fast),
        filter var(--transition-fast);
      white-space: nowrap;
    }

    .btn.small-btn {
      padding: 6px 12px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .btn.primary {
      background:
        radial-gradient(circle at 20% 0%, #60a5fa, var(--accent-strong));
      border-color: rgba(37, 99, 235, 0.95);
      box-shadow:
        0 15px 35px rgba(96, 165, 250, 0.5),
        0 0 16px rgba(37, 99, 235, 0.8);
      color: #f9fafb;
    }

    .btn.primary:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow:
        0 20px 45px rgba(59, 130, 246, 0.6),
        0 0 26px rgba(37, 99, 235, 0.95);
      filter: brightness(1.05);
    }

    .btn.outline {
      border-color: rgba(148, 163, 184, 0.9);
      background: #eff6ff;
      color: var(--text-main);
    }

    .btn.outline:hover {
      border-color: var(--accent);
      background: #dbeafe;
      box-shadow: 0 12px 28px rgba(148, 163, 184, 0.45);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background:
        radial-gradient(circle at 20% 0%, #fdba74, var(--accent-2));
      border-color: rgba(249, 115, 22, 0.95);
      box-shadow:
        0 13px 32px rgba(248, 150, 70, 0.6),
        0 0 18px rgba(249, 115, 22, 0.9);
      color: #111827;
    }

    .btn.secondary:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow:
        0 18px 40px rgba(249, 115, 22, 0.7),
        0 0 26px rgba(249, 115, 22, 0.95);
      filter: brightness(1.04);
    }

    .btn:disabled {
      opacity: 0.55;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    /* pressed state for buttons */
    .btn:active,
    .choice-btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 6px 14px rgba(148, 163, 184, 0.4);
      filter: brightness(0.97);
    }

    /* YouTube-style channel button (generic, not official logo) */
    .youtube-btn {
      background: radial-gradient(circle at 20% 0%, #fb7185, #ef4444);
      border-color: rgba(239, 68, 68, 0.95);
      color: #fef2f2;
      box-shadow:
        0 13px 30px rgba(248, 113, 113, 0.6),
        0 0 16px rgba(239, 68, 68, 0.9);
    }

    .youtube-btn:hover {
      transform: translateY(-1px) scale(1.02);
      filter: brightness(1.05);
      box-shadow:
        0 18px 40px rgba(248, 113, 113, 0.7),
        0 0 24px rgba(239, 68, 68, 0.95);
    }

    .yt-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fecaca, #b91c1c);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 0 10px rgba(248, 113, 113, 0.8);
    }

    /* generic play triangle, not an official logo */
    .yt-icon::before {
      content: "";
      border-style: solid;
      border-width: 4px 0 4px 7px;
      border-color: transparent transparent transparent #fef2f2;
      margin-left: 1px;
    }

    /* chips for easy question count */
    .easy-options {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: #eff6ff;
      border: 1px solid rgba(148, 163, 184, 0.9);
      box-shadow: 0 14px 30px rgba(148, 163, 184, 0.45);
      animation: slideFadeIn 0.24s ease-out;
    }

    .easy-options-label {
      font-size: 0.86rem;
      color: var(--text-soft);
      margin-bottom: 6px;
    }

    .easy-options-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn.chip {
      padding: 7px 14px;
      font-size: 0.85rem;
      border-radius: 999px;
      background: linear-gradient(135deg, #eff6ff, #e0f2fe);
      border-color: rgba(148, 163, 184, 0.9);
      box-shadow: 0 8px 18px rgba(148, 163, 184, 0.4);
    }

    .btn.chip:hover {
      border-color: var(--accent);
      background: #dbeafe;
      transform: translateY(-1px);
    }

    .btn.chip.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(37, 99, 235, 0.95),
        0 12px 26px rgba(148, 163, 184, 0.5);
      color: #1d4ed8;
    }

    @keyframes slideFadeIn {
      from {
        opacity: 0;
        transform: translateY(4px) scale(0.98);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .safety-note {
      margin-top: 8px;
      padding: 12px 14px;
      border-radius: 14px;
      background:
        radial-gradient(circle at top left, #f9fafb, #eff6ff);
      border: 1px dashed rgba(148, 163, 184, 0.9);
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .safety-note h3 {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent);
      margin-bottom: 6px;
    }

    .safety-note ul {
      margin: 0;
      padding-left: 18px;
      display: grid;
      gap: 4px;
    }

    .loader {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .loader-orbs {
      display: flex;
      gap: 10px;
    }

    .loader-orbs span {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: conic-gradient(
        from 120deg,
        var(--accent),
        var(--accent-2),
        var(--accent)
      );
      opacity: 0.9;
      animation: loader-bounce 0.8s infinite alternate;
      box-shadow: 0 0 14px rgba(37, 99, 235, 0.9);
    }

    .loader-orbs span:nth-child(2) {
      animation-delay: 0.15s;
    }

    .loader-orbs span:nth-child(3) {
      animation-delay: 0.3s;
    }

    .loader-text {
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-size: 0.85rem;
    }

    .loader-sub {
      font-size: 0.86rem;
      color: var(--text-soft);
      max-width: 360px;
    }

    @keyframes loader-bounce {
      from {
        transform: translateY(0) scale(1);
        opacity: 0.5;
      }
      to {
        transform: translateY(-7px) scale(1.08);
        opacity: 1;
      }
    }

    .quiz-header-block {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .quiz-header-top {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.85rem;
      color: var(--text-soft);
      align-items: center;
    }

    .mode-label {
      padding: 4px 10px;
      border-radius: 999px;
      background: #eff6ff;
      border: 1px solid rgba(148, 163, 184, 0.9);
      color: var(--accent);
    }

    .progress-label {
      padding: 4px 10px;
      border-radius: 999px;
      background: #eff6ff;
      border: 1px solid rgba(148, 163, 184, 0.7);
    }

    .score-mini {
      font-size: 0.8rem;
      padding: 3px 10px;
      border-radius: 999px;
      background: #eff6ff;
      border: 1px dashed rgba(148, 163, 184, 0.9);
      color: var(--accent-strong-2);
    }

    .progress-bar {
      width: 100%;
      height: 7px;
      border-radius: 999px;
      background: #eff6ff;
      border: 1px solid rgba(129, 140, 248, 0.8);
      overflow: hidden;
      box-shadow: inset 0 0 0 1px rgba(219, 234, 254, 1);
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        var(--accent),
        var(--accent-2),
        var(--accent)
      );
      box-shadow:
        0 0 16px rgba(37, 99, 235, 0.9),
        0 0 26px rgba(249, 115, 22, 0.6);
      transition: width 0.25s ease-out;
      animation: progress-glow 1.6s infinite alternate ease-in-out;
    }

    @keyframes progress-glow {
      0% {
        filter: hue-rotate(0deg);
        box-shadow:
          0 0 12px rgba(37, 99, 235, 0.8),
          0 0 18px rgba(249, 115, 22, 0.4);
      }
      100% {
        filter: hue-rotate(16deg);
        box-shadow:
          0 0 16px rgba(37, 99, 235, 1),
          0 0 24px rgba(249, 115, 22, 0.7);
      }
    }

    .question-card {
      margin-top: 12px;
      padding: 16px 14px;
      border-radius: 18px;
      background: var(--bg-card-soft);
      border: 1px solid rgba(209, 213, 219, 0.9);
      box-shadow:
        0 14px 32px rgba(148, 163, 184, 0.35);
      transform-origin: top;
    }

    .question-text {
      margin: 0 0 12px;
      font-size: 1.02rem;
      line-height: 1.4;
    }

    .choices-container {
      display: grid;
      gap: 8px;
    }

    .choice-btn {
      width: 100%;
      text-align: left;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: linear-gradient(135deg, #eff6ff, #dbeafe);
      color: var(--text-main);
      font-size: 0.94rem;
      cursor: pointer;
      transition: background var(--transition-fast),
        border-color var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        filter var(--transition-fast);
      position: relative;
      overflow: hidden;
    }

    .choice-btn::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(
        circle at 0% 0%,
        rgba(37, 99, 235, 0.18),
        transparent 60%
      );
      opacity: 0;
      transition: opacity var(--transition-fast);
      pointer-events: none;
    }

    .choice-btn:hover {
      border-color: var(--accent);
      background: #dbeafe;
      box-shadow: 0 12px 26px rgba(148, 163, 184, 0.45);
      transform: translateY(-1px);
      filter: brightness(1.03);
    }

    .choice-btn:hover::before {
      opacity: 1;
    }

    .choice-selected {
      border-color: var(--accent-strong);
      background: var(--accent-soft);
      box-shadow:
        0 0 0 1px rgba(37, 99, 235, 0.9),
        0 14px 30px rgba(148, 163, 184, 0.5);
      animation: choice-pulse 0.25s ease-out;
    }

    .text-answer-container {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }

    .text-answer-container label {
      font-size: 0.86rem;
      color: var(--text-soft);
    }

    #text-answer {
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: #f9fafb;
      color: var(--text-main);
      font-size: 0.95rem;
      outline: none;
      transition: border-color var(--transition-fast),
        box-shadow var(--transition-fast),
        background var(--transition-fast),
        transform var(--transition-fast);
    }

    #text-answer:focus {
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(37, 99, 235, 0.9),
        0 0 16px rgba(59, 130, 246, 0.5);
      background: #ffffff;
      transform: translateY(-1px);
    }

    .quiz-footer {
      margin-top: 14px;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 10px;
    }

    .quiz-footer-note {
      font-size: 0.8rem;
      color: var(--text-soft);
      max-width: 60%;
    }

    .quiz-footer-actions {
      display: flex;
      gap: 8px;
      flex-shrink: 0;
    }

    .summary-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .score-details {
      font-size: 0.95rem;
      color: var(--text-soft);
    }

    .summary-hint {
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .summary-container {
      margin-top: 6px;
      padding-right: 6px;
      overflow: auto;
      max-height: 340px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .summary-question {
      padding: 10px 11px;
      border-radius: 12px;
      border-left: 3px solid rgba(148, 163, 184, 0.9);
      background: #f9fafb;
    }

    .summary-question h3 {
      font-size: 0.95rem;
      margin-bottom: 4px;
    }

    .summary-result {
      font-size: 0.85rem;
      margin-bottom: 4px;
      color: var(--text-soft);
    }

    .summary-choice-list {
      list-style: none;
      margin: 6px 0;
      padding-left: 0;
      display: grid;
      gap: 4px;
      font-size: 0.9rem;
    }

    .summary-choice-list li {
      padding: 4px 7px;
      border-radius: 8px;
      border: 1px solid transparent;
    }

    .correct-answer {
      background: var(--success-soft);
      border-color: rgba(22, 163, 74, 0.95);
      color: #14532d;
    }

    .wrong-answer {
      background: var(--danger-soft);
      border-color: rgba(220, 38, 38, 0.95);
      color: #7f1d1d;
    }

    .correct-answer-inline {
      color: var(--success);
      font-weight: 600;
    }

    .wrong-answer-inline {
      color: var(--danger);
      font-weight: 600;
    }

    .explanation {
      margin-top: 4px;
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .site-footer {
      margin-top: 4px;
      font-size: 0.78rem;
      color: var(--text-soft);
      text-align: center;
      padding: 4px 6px;
    }

    .site-footer p {
      margin: 2px 0;
    }

    .hidden {
      display: none !important;
    }

    .animate-in {
      animation: question-pop 0.32s ease-out;
    }

    @keyframes question-pop {
      from {
        opacity: 0;
        transform: translateY(6px) scale(0.97);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* new flash animations for correct / wrong */
    .question-card.correct-flash {
      box-shadow:
        0 0 0 2px rgba(34, 197, 94, 0.9),
        0 10px 26px rgba(34, 197, 94, 0.5);
      animation: correct-flash 0.35s ease-out;
    }

    .question-card.wrong-flash {
      box-shadow:
        0 0 0 2px rgba(239, 68, 68, 0.9),
        0 10px 26px rgba(239, 68, 68, 0.5);
      animation: wrong-flash 0.35s ease-out;
    }

    @keyframes correct-flash {
      0% {
        transform: translateY(0) scale(1);
        background-color: var(--bg-card-soft);
      }
      40% {
        transform: translateY(-2px) scale(1.02);
        background-color: rgba(22, 163, 74, 0.08);
      }
      100% {
        transform: translateY(0) scale(1);
        background-color: var(--bg-card-soft);
      }
    }

    @keyframes wrong-flash {
      0% {
        transform: translateX(0) scale(1);
        background-color: var(--bg-card-soft);
      }
      25% {
        transform: translateX(-4px) scale(0.99);
        background-color: rgba(220, 38, 38, 0.07);
      }
      50% {
        transform: translateX(4px) scale(0.99);
      }
      75% {
        transform: translateX(-2px) scale(1);
      }
      100% {
        transform: translateX(0) scale(1);
        background-color: var(--bg-card-soft);
      }
    }

    @keyframes choice-pulse {
      0% {
        transform: translateY(0) scale(1);
      }
      50% {
        transform: translateY(-1px) scale(1.03);
      }
      100% {
        transform: translateY(0) scale(1);
      }
    }

    /* Mobile layout fixes */
@media (max-width: 600px) {
  /* Allow the page to scroll vertically on phones */
  body {
    overflow-x: hidden;
    overflow-y: auto;
  }

  /* Let cards grow fully on small screens instead of clipping content */
  .panel-card {
    max-height: none;
    overflow: visible;
  }

  /* Stack mode buttons nicely and keep them visible */
  .mode-buttons {
    flex-direction: column;
    align-items: stretch;
  }

  .mode-buttons .btn {
    width: 100%;
    justify-content: center;
    text-align: center;
  }
}


    @media (min-width: 768px) {
      .panel-card {
        padding: 30px 26px 22px;
      }
      .site-header h1 {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body aria-labelledby="site-title">
  <div class="app-shell">
    <header class="site-header" role="banner">
      <h1 id="site-title">
        <span class="title-glow"></span>
        MCOC Quiz Arena
        <span class="badge">Unofficial fan-made</span>
      </h1>
      <div class="header-right">
        <p class="tagline">
          Fast, arcade-style quizzes about Marvel Contest of Champions  

        </p>

        <!-- Channel button -->
        <button id="channel-link" class="btn youtube-btn" type="button">
          <span class="yt-icon" aria-hidden="true"></span>
          <span class="yt-label">My MCOC channel</span>
        </button>

        <button id="sound-toggle" class="btn outline small-btn" type="button">
          ðŸ”Š Sound: On
        </button>
      </div>
    </header>

    <main class="site-main" role="main">
      <!-- Start screen -->
      <section id="start-screen" class="panel" aria-label="Difficulty selection">
        <div class="panel-card">
          <div>
            <h2>Pick your difficulty</h2>
            <p style="margin-top:4px;font-size:0.95rem;color:var(--text-soft);">
              Questions are dynamically generated from curated data about Champion classes,
              immunities, game modes, currencies and combat mechanics. Every run feels fresh.
            </p>
          </div>

          <div class="mode-buttons">
            <button id="easy-btn" class="btn primary" type="button">
              Easy
            </button>
            <button id="hard-btn" class="btn secondary" type="button">
              Hard
            </button>
            <button id="veryhard-btn" class="btn outline" type="button">
              Very hard
            </button>
          </div>

          <!-- Easy mode question-count selector -->
          <div id="easy-options" class="easy-options hidden">
            <p class="easy-options-label">
              How many Easy questions would you like this round?
            </p>
            <div class="easy-options-buttons">
              <button class="btn chip" data-easy-count="10" type="button">10 questions</button>
              <button class="btn chip" data-easy-count="20" type="button">20 questions</button>
              <button class="btn chip" data-easy-count="30" type="button">30 questions</button>
            </div>
          </div>

          <div class="safety-note">
            
            <ul>
              <li>
                This is an <strong>unofficial</strong> fan project and is not endorsed by Kabam,
                Netmarble, or Marvel.
              </li>
              <li>
                All questions are built from public gameplay information (classes, modes,
                currencies, mechanics) phrased in original text.
              </li>
              <li>
                No official logos, champion portraits, cut-scenes, or in-game audio are used.
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Loading screen -->
      <section id="loading-screen" class="panel hidden" aria-label="Loading quiz">
        <div class="panel-card center">
          <div class="loader">
            <div class="loader-orbs" aria-hidden="true">
              <span></span>
              <span></span>
              <span></span>
            </div>
            <p class="loader-text">Building a quiz for you</p>
            <p class="loader-sub">
              Shuffling champion data, class matchups and combat mechanics into a random quiz.
            </p>
          </div>
        </div>
      </section>

      <!-- Quiz screen -->
      <section id="quiz-screen" class="panel hidden" aria-label="Quiz in progress">
        <div class="panel-card">
          <div class="quiz-header-block">
            <div class="quiz-header-top">
              <div id="mode-label" class="mode-label"></div>
              <div id="progress-label" class="progress-label"></div>
              <div id="score-mini" class="score-mini"></div>
            </div>
            <div class="progress-bar" aria-hidden="true">
              <div id="progress-fill" class="progress-fill"></div>
            </div>
          </div>

          <div id="question-card" class="question-card">
            <p
              id="question-text"
              class="question-text"
              aria-live="polite"
            ></p>

            <div id="choices-container" class="choices-container"></div>

            <div id="text-answer-container" class="text-answer-container hidden">
              <label for="text-answer">
                Type your answer (class, mode, buff name, debuff name, etc.):
              </label>
              <input id="text-answer" type="text" autocomplete="off" />
            </div>
          </div>

          <div class="quiz-footer">
            <p class="quiz-footer-note" id="footer-note">
              Answer carefully â€“ your score and a full breakdown will appear at the end.
            </p>
            <div class="quiz-footer-actions">
              <button id="quiz-home-btn" class="btn outline small-btn" type="button">Home</button>
              <button id="next-btn" class="btn primary" type="button" disabled>
                Next question
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Result screen -->
      <section id="result-screen" class="panel hidden" aria-label="Quiz results">
        <div class="panel-card">
          <div>
            <h2 id="score-headline" aria-live="polite"></h2>
            <p id="score-details" class="score-details"></p>
          </div>

          <div class="summary-actions">
            <button id="restart-btn" class="btn primary" type="button">Play again</button>
            <button id="back-home-btn" class="btn outline" type="button">
              Back to home
            </button>
          </div>

          <hr style="border-color:rgba(209,213,219,0.9);" />

          <h3>Question review</h3>
          <p class="summary-hint">
            <span style="color:var(--success);">Green</span> entries show correct answers.
            <span style="color:var(--danger);">Red</span> entries highlight mistakes. For wrong
            answers, the correct response is also marked.
          </p>

          <div id="summary-container" class="summary-container"></div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p>
        Marvel Contest of Champions is a trademark of Kabam Games, Inc. and Marvel.
        All rights to game content are owned by their respective holders.
      </p>
      <p>
        This is a non-commercial, unofficial fan-made quiz that uses only text-based
        gameplay information and is not endorsed or sponsored by Kabam or Marvel.
      </p>
    </footer>
  </div>

  <!-- Question pool + templates -->
  <script src="quiz-data.js"></script>

  <!-- Core game logic + sounds -->
  <script>
    (function () {
      "use strict";

      const EASY_QUESTION_MAX = 30;
      const HARD_QUESTION_COUNT = 15;

      // --- Audio: click & feedback sounds (no background loop) -------------
      let audioCtx = null;
      let soundsEnabled = true;

      const soundToggleBtn = document.getElementById("sound-toggle");

      function ensureAudioContext() {
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!AudioContext) {
          audioCtx = null;
          return;
        }
        if (!audioCtx) {
          audioCtx = new AudioContext();
        }
        if (audioCtx.state === "suspended") {
          audioCtx.resume();
        }
      }

      function playClickSound() {
        if (!soundsEnabled) return;

        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!AudioContext) return;

        ensureAudioContext();
        if (!audioCtx) return;

        try {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();

          osc.type = "square";
          osc.connect(gain);
          gain.connect(audioCtx.destination);

          const now = audioCtx.currentTime;

          gain.gain.setValueAtTime(0, now);
          gain.gain.linearRampToValueAtTime(0.12, now + 0.01);
          gain.gain.linearRampToValueAtTime(0, now + 0.12);

          osc.frequency.setValueAtTime(700, now);
          osc.frequency.linearRampToValueAtTime(900, now + 0.1);

          osc.start(now);
          osc.stop(now + 0.14);
        } catch (e) {
          // ignore audio errors
        }
      }

      // Click feedback sounds (correct / wrong)
      function playFeedbackSound(isCorrect) {
        if (!soundsEnabled) return;

        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (!AudioContext) return;

        ensureAudioContext();
        if (!audioCtx) return;

        try {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();

          osc.type = "triangle";
          osc.connect(gain);
          gain.connect(audioCtx.destination);

          const now = audioCtx.currentTime;

          gain.gain.setValueAtTime(0, now);
          gain.gain.linearRampToValueAtTime(0.22, now + 0.02);
          gain.gain.linearRampToValueAtTime(0.0, now + 0.32);

          if (isCorrect) {
            // cheerful up-glide
            osc.frequency.setValueAtTime(650, now);
            osc.frequency.linearRampToValueAtTime(1000, now + 0.28);
          } else {
            // short "whoops" down-glide
            osc.frequency.setValueAtTime(420, now);
            osc.frequency.linearRampToValueAtTime(230, now + 0.28);
          }

          osc.start(now);
          osc.stop(now + 0.34);
        } catch (e) {
          // ignore audio errors
        }
      }

      // Sound toggle button
      soundToggleBtn.addEventListener("click", function () {
        // play click based on current state, then toggle
        playClickSound();
        soundsEnabled = !soundsEnabled;
        soundToggleBtn.textContent = soundsEnabled ? "ðŸ”Š Sound: On" : "ðŸ”‡ Sound: Off";
      });

      // --- Quiz state -------------------------------------------------------
      let currentMode = null;
      let questions = [];
      let currentQuestionIndex = 0;
      let userAnswers = [];
      let pointsPerQuestion = 1;
      let selectedChoiceIndex = null;
      let currentScorePoints = 0;
      let currentTotalQuestions = 0;

      // --- DOM references ---------------------------------------------------
      const startScreen = document.getElementById("start-screen");
      const loadingScreen = document.getElementById("loading-screen");
      const quizScreen = document.getElementById("quiz-screen");
      const resultScreen = document.getElementById("result-screen");

      const modeLabelEl = document.getElementById("mode-label");
      const progressLabelEl = document.getElementById("progress-label");
      const scoreMiniEl = document.getElementById("score-mini");
      const progressFillEl = document.getElementById("progress-fill");

      const questionCard = document.getElementById("question-card");
      const questionTextEl = document.getElementById("question-text");
      const choicesContainer = document.getElementById("choices-container");
      const textAnswerContainer = document.getElementById(
        "text-answer-container"
      );
      const textInput = document.getElementById("text-answer");
      const nextBtn = document.getElementById("next-btn");
      const footerNote = document.getElementById("footer-note");

      const scoreHeadline = document.getElementById("score-headline");
      const scoreDetails = document.getElementById("score-details");
      const summaryContainer = document.getElementById("summary-container");

      const easyBtn = document.getElementById("easy-btn");
      const hardBtn = document.getElementById("hard-btn");
      const veryHardBtn = document.getElementById("veryhard-btn");
      const restartBtn = document.getElementById("restart-btn");

      const backHomeBtn = document.getElementById("back-home-btn");
      const quizHomeBtn = document.getElementById("quiz-home-btn");
      const channelBtn = document.getElementById("channel-link");

      const easyOptions = document.getElementById("easy-options");
      const easyOptionButtons =
        easyOptions.querySelectorAll("[data-easy-count]");

      // --- Event listeners --------------------------------------------------
      easyBtn.addEventListener("click", function () {
        playClickSound();
        easyOptions.classList.remove("hidden");
      });

      easyOptionButtons.forEach(function (btn) {
        btn.addEventListener("click", function () {
          playClickSound();
          const count = parseInt(btn.getAttribute("data-easy-count"), 10);
          if (!count) return;

          easyOptionButtons.forEach(function (b) {
            b.classList.remove("active");
          });
          btn.classList.add("active");

          beginQuiz("easy", count);
          easyOptions.classList.add("hidden");
        });
      });

      hardBtn.addEventListener("click", function () {
        playClickSound();
        beginQuiz("hard");
      });

      veryHardBtn.addEventListener("click", function () {
        playClickSound();
        beginQuiz("veryHard");
      });

      restartBtn.addEventListener("click", function () {
        playClickSound();
        goHome();
      });

      backHomeBtn.addEventListener("click", function () {
        playClickSound();
        goHome();
      });

      quizHomeBtn.addEventListener("click", function () {
        playClickSound();
        const leave = confirm(
          "Return to home screen? Your current quiz progress will be lost."
        );
        if (leave) {
          goHome();
        }
      });

      channelBtn.addEventListener("click", function () {
        playClickSound();
        window.open(
          "https://www.youtube.com/@mcoc1all1",
          "_blank",
          "noopener,noreferrer"
        );
      });

      nextBtn.addEventListener("click", function () {
        handleNext();
      });

      // --- Core flow --------------------------------------------------------

      function beginQuiz(mode, questionCountOverride) {
        if (
          !window.MCOC_QUIZ_BANK ||
          !window.MCOC_QUIZ_BANK.generateQuizQuestions
        ) {
          alert("Question bank is not loaded. Please check quiz-data.js.");
          return;
        }

        currentMode = mode;

        if (mode === "easy") {
          pointsPerQuestion = 1;
        } else if (mode === "hard") {
          pointsPerQuestion = 2;
        } else {
          // veryHard
          pointsPerQuestion = 3;
        }

        currentScorePoints = 0;

        const questionCount =
          questionCountOverride ||
          (mode === "easy" ? EASY_QUESTION_MAX : HARD_QUESTION_COUNT); // 15 for both hard + very hard

        currentTotalQuestions = questionCount;

        questions = window.MCOC_QUIZ_BANK.generateQuizQuestions(
          mode,
          questionCount
        );

        currentQuestionIndex = 0;
        userAnswers = [];
        selectedChoiceIndex = null;

        startScreen.classList.add("hidden");
        resultScreen.classList.add("hidden");
        quizScreen.classList.add("hidden");
        loadingScreen.classList.remove("hidden");

        setTimeout(function () {
          loadingScreen.classList.add("hidden");
          quizScreen.classList.remove("hidden");

          if (mode === "easy") {
            modeLabelEl.textContent =
              "Easy quiz â€“ " +
              currentTotalQuestions +
              " multiple-choice questions, 1 point each.";
            footerNote.textContent =
              "Tap the best answer, then move to the next question. Each correct answer gives 1 point.";
          } else if (mode === "hard") {
            modeLabelEl.textContent =
              "Hard quiz â€“ 15 text-entry questions, 2 points each.";
            footerNote.textContent =
              "Type your answer clearly (class, mode, buff name, debuff name, etc.). Each correct answer gives 2 points.";
          } else {
            modeLabelEl.textContent =
              "Very hard quiz â€“ 15 expert text-entry questions, 3 points each.";
            footerNote.textContent =
              "Expect advanced questions about immunities, alliance modes and specific mechanics. Each correct answer gives 3 points.";
          }

          updateProgress();
          showQuestion();
        }, 1100);
      }

      function showQuestion() {
        const q = questions[currentQuestionIndex];
        progressLabelEl.textContent =
          "Question " + (currentQuestionIndex + 1) + " of " + questions.length;

        questionTextEl.textContent = q.question;

        questionCard.classList.remove("animate-in");
        void questionCard.offsetWidth;
        questionCard.classList.add("animate-in");

        if (currentMode === "easy" && q.type === "mcq") {
          textAnswerContainer.classList.add("hidden");
          choicesContainer.classList.remove("hidden");
          choicesContainer.innerHTML = "";
          selectedChoiceIndex = null;
          nextBtn.disabled = true;

          q.choices.forEach(function (choice, idx) {
            const btn = document.createElement("button");
            btn.className = "choice-btn";
            btn.type = "button";
            btn.textContent = choice.text;
            btn.addEventListener("click", function () {
              playClickSound();
              selectChoice(idx);
            });
            choicesContainer.appendChild(btn);
          });

          nextBtn.textContent =
            currentQuestionIndex === questions.length - 1
              ? "Finish quiz"
              : "Next question";
        } else {
          choicesContainer.classList.add("hidden");
          choicesContainer.innerHTML = "";
          textAnswerContainer.classList.remove("hidden");
          textInput.value = "";
          nextBtn.disabled = false;
          textInput.focus();

          nextBtn.textContent =
            currentQuestionIndex === questions.length - 1
              ? "Finish quiz"
              : "Submit & next";
        }

        updateProgress();
      }

      function selectChoice(idx) {
        selectedChoiceIndex = idx;
        const buttons = choicesContainer.querySelectorAll(".choice-btn");
        buttons.forEach(function (btn, i) {
          btn.classList.toggle("choice-selected", i === idx);
        });
        nextBtn.disabled = false;
      }

      function handleNext() {
        const q = questions[currentQuestionIndex];
        let isCorrect = false;

        if (currentMode === "easy") {
          if (selectedChoiceIndex === null) {
            return;
          }
          const userChoice = q.choices[selectedChoiceIndex];
          const correctIndex = q.choices.findIndex(function (c) {
            return c.correct;
          });
          isCorrect = !!userChoice.correct;

          if (isCorrect) {
            currentScorePoints += pointsPerQuestion;
          }

          userAnswers.push({
            mode: "easy",
            question: q.question,
            explanation: q.explanation || "",
            choices: q.choices,
            selectedIndex: selectedChoiceIndex,
            correctIndex: correctIndex,
            isCorrect: isCorrect
          });

          selectedChoiceIndex = null;
        } else {
          const rawAnswer = textInput.value.trim();
          isCorrect = checkTextAnswer(rawAnswer, q);

          if (isCorrect) {
            currentScorePoints += pointsPerQuestion;
          }

          userAnswers.push({
            mode: "hard",
            question: q.question,
            explanation: q.explanation || "",
            correctAnswer: q.answer,
            acceptedAnswers: q.acceptableAnswers,
            userAnswer: rawAnswer,
            isCorrect: isCorrect
          });
        }

        // flash the card and play feedback sound
        questionCard.classList.remove("correct-flash", "wrong-flash");
        void questionCard.offsetWidth; // restart animation
        questionCard.classList.add(isCorrect ? "correct-flash" : "wrong-flash");
        playFeedbackSound(isCorrect);

        currentQuestionIndex++;

        if (currentQuestionIndex >= questions.length) {
          finishQuiz();
        } else {
          updateProgress();
          showQuestion();
        }
      }

      function updateProgress() {
        const total = questions.length || 1;
        const answered = currentQuestionIndex;
        const percent = (answered / total) * 100;
        progressFillEl.style.width = percent + "%";

        const maxPoints = total * pointsPerQuestion;
        scoreMiniEl.textContent =
          "Score: " + currentScorePoints + " / " + maxPoints + " pts";
      }

      function normalizeAnswer(str) {
        return (str || "")
          .toString()
          .trim()
          .toLowerCase()
          .replace(/\s+/g, " ");
      }

      function checkTextAnswer(answer, q) {
        const normUser = normalizeAnswer(answer);
        const answers =
          q.acceptableAnswers && q.acceptableAnswers.length
            ? q.acceptableAnswers
            : [q.answer];
        return answers.some(function (ans) {
          return normalizeAnswer(ans) === normUser;
        });
      }

      function finishQuiz() {
        quizScreen.classList.add("hidden");
        resultScreen.classList.remove("hidden");

        const correctCount = userAnswers.filter(function (a) {
          return a.isCorrect;
        }).length;

        const totalQuestions = userAnswers.length;
        const totalPoints = currentScorePoints;
        const maxPoints = totalQuestions * pointsPerQuestion;
        const percent = Math.round((correctCount / totalQuestions) * 100);

        scoreHeadline.textContent =
          "You scored " + totalPoints + " / " + maxPoints + " points";

        let feedback = "";
        if (percent >= 85) {
          feedback =
            "Incredible! Youâ€™re playing at top Summoner level â€“ the Battlerealm knowledge is strong.";
        } else if (percent >= 60) {
          feedback =
            "Solid run! A bit more practice with classes, modes and mechanics will push you even higher.";
        } else {
          feedback =
            "The Contest is unforgiving. Review the basics and try another round â€“ youâ€™ll improve quickly.";
        }

        scoreDetails.textContent =
          "Correct answers: " +
          correctCount +
          " / " +
          totalQuestions +
          " (" +
          percent +
          "%). " +
          feedback;

        buildSummary();
      }

      function buildSummary() {
        summaryContainer.innerHTML = "";

        userAnswers.forEach(function (entry, idx) {
          const block = document.createElement("div");
          block.className = "summary-question";

          const heading = document.createElement("h3");
          heading.textContent = "Q" + (idx + 1) + ". " + entry.question;
          block.appendChild(heading);

          const resultLine = document.createElement("p");
          resultLine.className = "summary-result";
          resultLine.textContent = entry.isCorrect
            ? "You answered this correctly."
            : "You got this one wrong.";
          block.appendChild(resultLine);

          if (entry.mode === "easy") {
            const list = document.createElement("ul");
            list.className = "summary-choice-list";

            entry.choices.forEach(function (choice, idxChoice) {
              const li = document.createElement("li");
              li.textContent = choice.text;

              if (choice.correct) {
                li.classList.add("correct-answer");
              }

              if (!choice.correct && idxChoice === entry.selectedIndex) {
                li.classList.add("wrong-answer");
              }

              list.appendChild(li);
            });

            block.appendChild(list);
          } else {
            const userLine = document.createElement("p");
            const safeUser =
              entry.userAnswer && entry.userAnswer.length
                ? entry.userAnswer
                : "(blank)";

            userLine.innerHTML =
              "<strong>Your answer:</strong> " +
              '<span class="' +
              (entry.isCorrect
                ? "correct-answer-inline"
                : "wrong-answer-inline") +
              '">' +
              escapeHtml(safeUser) +
              "</span>";
            block.appendChild(userLine);

            if (!entry.isCorrect) {
              const correctLine = document.createElement("p");
              const canonical =
                (entry.acceptedAnswers && entry.acceptedAnswers[0]) ||
                entry.correctAnswer;
              correctLine.innerHTML =
                "<strong>Correct answer:</strong> " +
                '<span class="correct-answer-inline">' +
                escapeHtml(canonical) +
                "</span>";
              block.appendChild(correctLine);
            } else if (entry.acceptedAnswers && entry.acceptedAnswers.length > 1) {
              const correctLine = document.createElement("p");
              const allAccepted = entry.acceptedAnswers.join(", ");
              correctLine.innerHTML =
                "<strong>Accepted answers included:</strong> " +
                escapeHtml(allAccepted);
              block.appendChild(correctLine);
            }
          }

          if (entry.explanation) {
            const expl = document.createElement("p");
            expl.className = "explanation";
            expl.textContent = entry.explanation;
            block.appendChild(expl);
          }

          summaryContainer.appendChild(block);
        });
      }

      function goHome() {
        resultScreen.classList.add("hidden");
        quizScreen.classList.add("hidden");
        loadingScreen.classList.add("hidden");
        startScreen.classList.remove("hidden");

        // Reset easy-option chips
        easyOptions.classList.add("hidden");
        easyOptionButtons.forEach(function (b) {
          b.classList.remove("active");
        });

        // Clear any old state so new runs are fresh
        questions = [];
        userAnswers = [];
        currentQuestionIndex = 0;
        currentScorePoints = 0;
      }

      function escapeHtml(str) {
        return String(str)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#039;");
      }
    })();
  </script>
</body>
</html>
